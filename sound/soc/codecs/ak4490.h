#define AK4490_REG_BITS			8
#define AK4490_VAL_BITS			8

#define AK4490_REG_CONTROL1		0x00
#define AK4490_REG_CONTROL2		0x01
#define AK4490_REG_CONTROL3		0x02
#define AK4490_REG_ATTL			0x03
#define AK4490_REG_ATTR			0x04
#define AK4490_REG_CONTROL4		0x05
#define AK4490_REG_CONTROL5		0x06
#define AK4490_REG_CONTROL6		0x07
#define AK4490_REG_CONTROL7		0x08
#define AK4490_REG_CONTROL8		0x09
#define AK4490_REG_EXT_CLKGEN	0x0A

#define AK4490_RSTN				(1 << 0)
#define AK4490_RSTN_SHIFT		0
#define AK4490_RSTN_RESET		(0 << 0)
#define AK4490_RSTN_NORMAL		(1 << 0)

#define AK4490_DIF				(7 << 1)
#define AK4490_DIF_SHIFT		1
#define AK4490_DIF_RJ16			(0 << 1)
#define AK4490_DIF_RJ20			(1 << 1)
#define AK4490_DIF_LJ24			(2 << 1)
#define AK4490_DIF_I2S24		(3 << 1)
#define AK4490_DIF_RJ24			(4 << 1)
#define AK4490_DIF_RJ32			(5 << 1)
#define AK4490_DIF_LJ32			(6 << 1)
#define AK4490_DIF_I2S32		(7 << 1)

#define AK4490_ECS				(1 << 5)
#define AK4490_ECS_SHIFT		5
#define AK4490_ECS_768K			(0 << 5)
#define AK4490_ECS_384K			(1 << 5)

#define AK4490_EXDF				(1 << 6)
#define AK4490_EXDF_SHIFT		6
#define AK4490_EXDF_DISABLE		(0 << 6)
#define AK4490_EXDF_ENABLE		(1 << 6)

#define AK4490_ACKS				(1 << 7)
#define AK4490_ACKS_SHIFT		7
#define AK4490_ACKS_MANUAL		(0 << 7)
#define AK4490_ACKS_AUTO		(1 << 7)

#define AK4490_SMUTE			(1 << 0)
#define AK4490_SMUTE_SHIFT		0
#define AK4490_SMUTE_NORMAL		(0 << 0)
#define AK4490_SMUTE_MUTED		(1 << 0)

#define AK4490_DEM				(3 << 1)
#define AK4490_DEM_SHIFT		1
#define AK4490_DEM_44K			(0 << 1)
#define AK4490_DEM_OFF			(1 << 1)
#define AK4490_DEM_48K			(2 << 1)
#define AK4490_DEM_32K			(3 << 1)

#define AK4490_DFSL				(3 << 3)
#define AK4490_DFSL_SHIFT		3
#define AK4490_DFSL_1X_8X		(0 << 3)
#define AK4490_DFSL_2X_16X		(1 << 3)
#define AK4490_DFSL_4X			(2 << 3)
#define AK4490_DFSL_RSVD		(3 << 3)

#define AK4490_SD				(1 << 5)
#define AK4490_SD_SHIFT			5
#define AK4490_SD_TRADITIOANAL	(0 << 5)
#define AK4490_SD_SHORT			(1 << 5)

#define AK4490_DZFM				(1 << 6)
#define AK4490_DZFM_SHIFT		6
#define AK4490_DZFM_SEPARATED	(0 << 6)
#define AK4490_DZFM_ANDED		(1 << 6)

#define AK4490_DZFE				(1 << 7)
#define AK4490_DZFE_SHIFT		7
#define AK4490_DZFE_DISABLE		(0 << 7)
#define AK4490_DZFE_ENABLE		(1 << 7)

#define AK4490_SLOW				(1 << 0)
#define AK4490_SLOW_SHIFT		0
#define AK4490_SLOW_SHARP		(0 << 0)
#define AK4490_SLOW_SLOW		(1 << 0)

#define AK4490_SELLR			(1 << 1)
#define AK4490_SELLR_SHIFT		1 
#define AK4490_SELLR_R			(0 << 1)
#define AK4490_SELLR_L			(1 << 1)

#define AK4490_DZFB				(1 << 2)
#define AK4490_DZFB_SHIFT		2
#define AK4490_DZFB_H			(0 << 2)
#define AK4490_DZFB_L			(1 << 2)

#define AK4490_MONO				(1 << 3)
#define AK4490_MONO_SHIFT		3
#define AK4490_MONO_STEREO		(0 << 3)
#define AK4490_MONO_MONO		(1 << 3)

#define AK4490_DCKB				(1 << 4)
#define AK4490_DCKB_SHIFT		4
#define AK4490_DCKB_FALLING		(0 << 4)
#define AK4490_DCKB_RAISING		(1 << 4)

#define AK4490_DCKS				(1 << 5)
#define AK4490_DCKS_SHIFT		5
#define AK4490_DCKS_512X		(0 << 5)
#define AK4490_DCKS_768X		(1 << 5)

#define AK4490_DP				(1 << 7)
#define AK4490_DP_SHIFT			7
#define AK4490_DP_PCM			(0 << 7)
#define AK4490_DP_DSD			(1 << 7)

#define AK4490_SSLOW			(1 << 0)
#define AK4490_SSLOW_SHIFT		0
#define AK4490_SSLOW_DISABLE	(0 << 0)
#define AK4490_SSLOW_ENABLE		(1 << 0)

#define AK4490_DFSH				(1 << 1)
#define AK4490_DFSH_SHIFT		1
#define AK4490_DFSH_1X_4X		(0 << 1)
#define AK4490_DFSH_8X_16X		(1 << 1)

#define AK4490_INVR				(1 << 6)
#define AK4490_INVR_SHIFT		6
#define AK4490_INVR_DISABLE		(0 << 6)
#define AK4490_INVR_ENABLE		(1 << 6)

#define AK4490_INVL				(1 << 7)
#define AK4490_INVL_SHIFT		7
#define AK4490_INVL_DISABLE		(0 << 7)
#define AK4490_INVL_ENABLE		(1 << 7)

#define AK4490_DSDSELL			(1 << 0)
#define AK4490_DSDSELL_SHIFT	0
#define AK4490_DSDSELL_2M_11M	(0 << 0)
#define AK4490_DSDSELL_5M		(1 << 0)

#define AK4490_DMRE				(1 << 3)
#define AK4490_DMRE_SHIFT		3
#define AK4490_DMRE_HOLD		(0 << 3)
#define AK4490_DMRE_RELEASE		(1 << 3)

#define AK4490_DMC				(1 << 4)
#define AK4490_DMC_SHIFT		4
#define AK4490_DMC_AUTO_RETERN	(0 << 4)
#define AK4490_DMC_MUTE_HOLD	(1 << 4)

#define AK4490_DMR				(1 << 5)
#define AK4490_DMR_SHIFT		5
#define AK4490_DMR_UNDETECTED	(0 << 5)
#define AK4490_DMR_DETECTERD	(1 << 5)

#define AK4490_DML				(1 << 6)
#define AK4490_DML_SHIFT		6
#define AK4490_DML_UNDETECTED	(0 << 6)
#define AK4490_DML_DETECTERD	(1 << 6)

#define AK4490_DDM				(1 << 7)
#define AK4490_DDM_SHIFT		7
#define AK4490_DDM_DISABLE		(0 << 7)
#define AK4490_DDM_ENABLE		(1 << 7)

#define AK4490_SYNCE			(1 << 0)
#define AK4490_SYNCE_SHIFT		0
#define AK4490_SYNCE_DISABLE	(0 << 0)
#define AK4490_SYNCE_ENABLE		(1 << 0)

#define AK4490_SC				(3 << 0)
#define AK4490_SC_SHIFT			0
#define AK4490_SC_1				(0 << 0)
#define AK4490_SC_2				(1 << 0)
#define AK4490_SC_3				(2 << 0)
#define AK4490_SC_RSVD			(3 << 0)

#define AK4490_DSDSELH			(1 << 0)
#define AK4490_DSDSELH_SHIFT	0
#define AK4490_DSDSELH_2M_5M	(0 << 0)
#define AK4490_DSDSELH_11M		(1 << 0)

#define AK4490_DSDF				(1 << 1)
#define AK4490_DSDF_SHIFT		1
#define AK4490_DSDF_50K			(0 << 1)
#define AK4490_DSDF_150K		(1 << 1)

#define AK4490_CLKGEN			(15 << 0)

#define AK4490_BASE				(1 << 0)
#define AK4490_BASE_SHIFT		0
#define AK4490_BASE_44100		(0 << 0)
#define AK4490_BASE_48000		(1 << 0)

#define AK4490_RATIO			(3 << 1)
#define AK4490_RATIO_SHIFT		1
#define AK4490_RATIO_1X			(0 << 1)
#define AK4490_RATIO_2X			(1 << 1)
#define AK4490_RATIO_4X			(2 << 1)
#define AK4490_RATIO_8X			(3 << 1)

#define AK4490_WIDTH			(1 << 3)
#define AK4490_WIDTH_SHIFT		3
#define AK4490_WIDTH_24			(0 << 3)
#define AK4490_WIDTH_32			(1 < 3)

#define AK4490_CLK				(1 << 7)
#define AK4490_CLK_SHIFT		7
#define AK4490_CLK_DISABLE		(0 << 1)
#define AK4490_CLK_ENABLE		(1 << 1)

/* codec mclk clock divider coefficients */
struct _mode_reg {
	int rate;
	int width;
	int bclk_ratio;
	uint8_t dif;
	uint8_t dfsl;
	uint8_t dfsh;
	uint8_t	clkgen;
};

static const struct _mode_reg mode_reg[] = {
	{ 44100, 16, 64, AK4490_DIF_I2S32, AK4490_DFSL_1X_8X, AK4490_DFSH_1X_4X, AK4490_BASE_44100 | AK4490_RATIO_1X | AK4490_WIDTH_32 },
	{ 88200, 16, 64, AK4490_DIF_I2S32, AK4490_DFSL_2X_16X, AK4490_DFSH_1X_4X, AK4490_BASE_44100 | AK4490_RATIO_2X | AK4490_WIDTH_32 },
	{176400, 16, 64, AK4490_DIF_I2S32, AK4490_DFSL_4X, AK4490_DFSH_1X_4X, AK4490_BASE_44100 | AK4490_RATIO_4X | AK4490_WIDTH_32 },
	{ 44100, 20, 64, AK4490_DIF_I2S32, AK4490_DFSL_1X_8X, AK4490_DFSH_1X_4X, AK4490_BASE_44100 | AK4490_RATIO_1X | AK4490_WIDTH_32 },
	{ 88200, 20, 64, AK4490_DIF_I2S32, AK4490_DFSL_2X_16X, AK4490_DFSH_1X_4X, AK4490_BASE_44100 | AK4490_RATIO_2X | AK4490_WIDTH_32 },
	{176400, 20, 64, AK4490_DIF_I2S32, AK4490_DFSL_4X, AK4490_DFSH_1X_4X, AK4490_BASE_44100 | AK4490_RATIO_4X | AK4490_WIDTH_32 },
	{ 44100, 24, 64, AK4490_DIF_I2S32, AK4490_DFSL_1X_8X, AK4490_DFSH_1X_4X, AK4490_BASE_44100 | AK4490_RATIO_1X | AK4490_WIDTH_32 },
	{ 88200, 24, 64, AK4490_DIF_I2S32, AK4490_DFSL_2X_16X, AK4490_DFSH_1X_4X, AK4490_BASE_44100 | AK4490_RATIO_2X | AK4490_WIDTH_32 },
	{176400, 24, 64, AK4490_DIF_I2S32, AK4490_DFSL_4X, AK4490_DFSH_1X_4X, AK4490_BASE_44100 | AK4490_RATIO_4X | AK4490_WIDTH_32 },
	{ 44100, 32, 64, AK4490_DIF_I2S32, AK4490_DFSL_1X_8X, AK4490_DFSH_1X_4X, AK4490_BASE_44100 | AK4490_RATIO_1X | AK4490_WIDTH_32 },
	{ 88200, 32, 64, AK4490_DIF_I2S32, AK4490_DFSL_2X_16X, AK4490_DFSH_1X_4X, AK4490_BASE_44100 | AK4490_RATIO_2X | AK4490_WIDTH_32 },
	{176400, 32, 64, AK4490_DIF_I2S32, AK4490_DFSL_4X, AK4490_DFSH_1X_4X, AK4490_BASE_44100 | AK4490_RATIO_4X | AK4490_WIDTH_32 },

	{ 48000, 16, 59, AK4490_DIF_I2S24, AK4490_DFSL_1X_8X, AK4490_DFSH_1X_4X, AK4490_BASE_48000 | AK4490_RATIO_1X | AK4490_WIDTH_24 },
	{ 96000, 16, 59, AK4490_DIF_I2S24, AK4490_DFSL_2X_16X, AK4490_DFSH_1X_4X, AK4490_BASE_48000 | AK4490_RATIO_2X | AK4490_WIDTH_24 },
	{192000, 16, 59, AK4490_DIF_I2S24, AK4490_DFSL_4X, AK4490_DFSH_1X_4X, AK4490_BASE_48000 | AK4490_RATIO_4X | AK4490_WIDTH_24 },
	{ 48000, 20, 59, AK4490_DIF_I2S24, AK4490_DFSL_1X_8X, AK4490_DFSH_1X_4X, AK4490_BASE_48000 | AK4490_RATIO_1X | AK4490_WIDTH_24 },
	{ 48000, 20, 59, AK4490_DIF_I2S24, AK4490_DFSL_1X_8X, AK4490_DFSH_1X_4X, AK4490_BASE_48000 | AK4490_RATIO_1X | AK4490_WIDTH_24 },
	{ 96000, 20, 59, AK4490_DIF_I2S24, AK4490_DFSL_2X_16X, AK4490_DFSH_1X_4X, AK4490_BASE_48000 | AK4490_RATIO_2X | AK4490_WIDTH_24 },
	{192000, 24, 59, AK4490_DIF_I2S24, AK4490_DFSL_4X, AK4490_DFSH_1X_4X, AK4490_BASE_48000 | AK4490_RATIO_4X | AK4490_WIDTH_24 },
	{ 96000, 24, 59, AK4490_DIF_I2S24, AK4490_DFSL_2X_16X, AK4490_DFSH_1X_4X, AK4490_BASE_48000 | AK4490_RATIO_2X | AK4490_WIDTH_24 },
	{192000, 24, 59, AK4490_DIF_I2S24, AK4490_DFSL_4X, AK4490_DFSH_1X_4X, AK4490_BASE_48000 | AK4490_RATIO_4X | AK4490_WIDTH_24 },

	{ 48000, 32,118, AK4490_DIF_I2S24, AK4490_DFSL_1X_8X, AK4490_DFSH_1X_4X, AK4490_BASE_48000 | AK4490_RATIO_1X | AK4490_WIDTH_32 },
	{ 96000, 32,118, AK4490_DIF_I2S24, AK4490_DFSL_2X_16X, AK4490_DFSH_1X_4X, AK4490_BASE_48000 | AK4490_RATIO_2X | AK4490_WIDTH_32 }
};

